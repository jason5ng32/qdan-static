<!DOCTYPE html><html lang="zh-CN"><head><meta charset="UTF-8"><meta name="apple-itunes-app" content="app-id=967710424"><meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0"><meta name="theme-color" content="#313131"><meta name="apple-mobile-web-app-capable" content="yes"><meta name="mobile-web-app-capable" content="yes"><meta name="apple-mobile-web-app-status-bar-style" content="black"><link rel="alternate" type="application/rss+xml" title="轻单精选 RSS Feed" href="../rss.rss"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="renderer" content="webkit"><link rel="icon" type="image/x-icon" href="../favicon.ico"><link rel="shortcut icon" href="../favicon.ico"><link rel="apple-touch-icon" sizes="192x192" href="../qlist-logo-icon.png"><title>Python技术十一问 | 轻单</title><meta name="Description" content="听 Doug Hellmann谈Python。当你从头开发一个Python应用时，如何迈出第一步呢？它和开发一个已有的应用程序有什么不同？对于计划开始构建自己的Python库的人们有什么样的建议呢？将一个模块加入Python标准库的流程是什么？"><meta name="keywords" content="极客科技, Python技术十一问"><meta itemprop="rating" content="31"><meta property="og:type" content="article"><meta property="og:url" content="https://qdan.me/list/VVlWZS7M6iHwrUrv"><meta property="og:title" content="Python技术十一问 | 轻单"><meta property="og:description" content="听 Doug Hellmann谈Python。当你从头开发一个Python应用时，如何迈出第一步呢？它和开发一个已有的应用程序有什么不同？对于计划开始构建自己的Python库的人们有什么样的建议呢？将一个模块加入Python标准库的流程是什么？"><meta property="og:image" content="https://qdan-res.kenengba.com/cover/2015/5/18/fce7d8ea1218d70ec0cf508872505940"><meta property="weibo:article:create_at" content="2015-05-18T03:11:45.950Z"><meta property="weibo:article:update_at" content="2015-05-18T03:12:17.421Z"><meta name="twitter:card" content="summary"><meta name="twitter:url" content="https://qdan.me/list/VVlWZS7M6iHwrUrv"><meta name="twitter:site" content="@qdanme"><meta name="twitter:title" content="Python技术十一问 | 轻单"><meta name="twitter:description" content="听 Doug Hellmann谈Python。当你从头开发一个Python应用时，如何迈出第一步呢？它和开发一个已有的应用程序有什么不同？对于计划开始构建自己的Python库的人们有什么样的建议呢？将一个模块加入Python标准库的流程是什么？"><meta name="twitter:image" content="https://qdan-res.kenengba.com/cover/2015/5/18/fce7d8ea1218d70ec0cf508872505940"><meta name="ua" content="SiteSucker for macOS/2.11.3"><link rel="stylesheet" href="../build/css/list-list.min.css"></head><body class="category-geek"><div class="header"><div class="inner-category"><div id="sectionHeader" class="section-header"><div class="top-header"><a href="../index-from=logo.html" class="area-logo"><h1 class="logo"><div class="blind">轻单 beta2</div><svg x="0" y="0"><use xlink:href="/img/logo.svg#logo" x="0" y="0"></use></svg></h1></a><div class="area-menu"><ul><!--li--><!--    a.get-app.btn-login.skin-bg.skin-bd.skin-bg-hover.desktop(href='https://appsto.re/us/yBHR5.i' target='_blank')--><!--        i.qlisticon.icon-phone-iphone--><!--        span 下载轻单客户端--><!--        .get-app-content-before.skin-bg--><!--        .get-app-content.skin-bg--><!--            img.app-logo(src='/img/logo_white.png')--><!--            h3 iOS 客户端--><!--            p 限时开放注册中--><!--            img.app-screenshot(src='/img/header/app-screenshot.png' height=220)--><li><a href="../login.html" class="skin-cl skin-bd btn-login login">登录/注册</a></li></ul></div></div><div class="cate-header"><div id="categoryList" class="area-cate"><ul class="list-cate"><li><a href="../index-from=header.html" class="menu-best">轻单精选</a></li><li><a href="../category/geek-from=header.html" class="active">极客科技</a></li><li><a href="../category/lifestyle-from=header.html">生活方式</a></li><li><a href="../category/culture-from=header.html">文艺范儿</a></li><li><a href="../category/art-from=header.html">设计艺术</a></li><li><a href="../category/entertainment-from=header.html">吃喝玩乐</a></li><li><a href="../category/lol-from=header.html">喜闻乐见</a></li><li><a href="../category/misc-from=header.html">其他</a></li></ul></div><a href="javascript:;" class="btn-menu btn-menu-toggle skin-cl"><div class="qlisticon icon-expand-more"></div></a></div><div id="popupMenu" class="popup-menu"><div class="popup-wrapper"><div class="menu-mobile"><div class="menu-top skin-cl">轻单类别<a href="javascript:;" class="btn-menu btn-menu-toggle skin-cl"><div class="qlisticon icon-expand-less"></div></a></div><ul class="menu-list"><li><a href="../index-from=header.html" class="menu-best">轻单精选</a></li><li><a href="../category/geek/new-from=header.html" class="menu-geek active">极客科技</a></li><li><a href="../category/lifestyle/new-from=header.html" class="menu-lifestyle">生活方式</a></li><li><a href="../category/culture/new-from=header.html" class="menu-culture">文艺范儿</a></li><li><a href="../category/art/new-from=header.html" class="menu-art">设计艺术</a></li><li><a href="../category/entertainment/new-from=header.html" class="menu-entertainment">吃喝玩乐</a></li><li><a href="../category/lol/new-from=header.html" class="menu-lol">喜闻乐见</a></li><li><a href="../category/misc/new-from=header.html" class="menu-misc">其他</a></li></ul></div><div id="menuOverlay" class="menu-overlay"></div></div></div></div><div class="section-fix"></div><div class="modals"><div class="modal modal-login"><div class="modal-container-cover"></div><div class="modal-container modal-login-container"><a href="javascript:;" class="close">×</a><div class="navs"><a href="../login.html" class="nav nav-login current">登录</a><a href="../login-action=register.html" class="nav nav-register">注册</a></div><div class="forms"><form method="POST" class="form login current"><div class="title"><h3>你正在开启轻世界的大门</h3></div><input name="email" placeholder="电子邮箱" type="email" class="input email"><input name="password" type="password" placeholder="密码" class="input password"><div class="error">.</div><input id="modal-login-keep-login" name="keep-login" type="checkbox" checked class="checkbox keep-login"><label for="modal-login-keep-login" class="text">保持登录</label><input type="submit" value="登录" class="submit"><input name="next" type="hidden" value="https://qdan.me/topic/VN1uJ1tyxSml4bEa"><div class="forgot-password-container"><a href="../forgot.html" class="forgot-password">忘记密码</a></div><div class="toggle-form-container"><a href="javascript:;" class="toggle-form">还未注册？<div class="qlisticon icon-right-circle"></div></a></div></form><form method="POST" class="form register"><div class="title"><h3>立即进入一个更轻的世界</h3></div><input name="email" placeholder="电子邮箱" type="email" class="input email"><input name="password" type="password" placeholder="密码" class="input password"><div class="error">.</div><input id="modal-login-agree-tos" name="agree-tos" type="checkbox" checked class="checkbox agree-tos"><label for="modal-login-agree-tos" class="text">我已阅读并同意<a href="../about/terms.html" target="_blank">《轻单用户服务条款》</a></label><input type="submit" value="注册" class="submit"><div class="toggle-form-container"><a href="javascript:;" class="toggle-form"><div class="qlisticon icon-left-circle"></div>已有帐户？</a></div></form></div><div class="sub-navs"><span class="nav">申请邀请码</span></div><div class="sub-forms"><form method="POST" class="apply"><input name="email" placeholder="你的电子邮件" type="email" class="input ui-input email"><textarea name="note" placeholder="来点自我介绍？" class="input ui-input note"></textarea><input type="submit" value="申请" class="submit ui-submit"><a href="javascript:;" class="back">返回</a></form></div></div></div><div class="modal modal-search"><div class="modal-container-cover"></div><div class="modal-container modal-search-container"><a href="javascript:;" class="close">×</a><form action="../search.html" autocomplete="off" class="search-form"><input name="q" placeholder="搜索轻单……" type="text" class="search-input"><div class="search-with-google"><label for="search-with-google-checkbox">我爱 Google</label><input id="search-with-google-checkbox" name="google" type="checkbox"></div></form><script id="search-results-template" type="text/html"><!--.sections-left.section.section-topics
    .title 相关话题
    .section-content
        each topic, index in [1, 2, 3]
            if index === 0
                .topic.topic-first.topic-following
                    img.cover(src='https://dn-qlist.qbox.me/avatar/default.png?imageView2/1/w/144/interlace/1' width=54 height=54)
                    .right
                        a.topic-title(href='/topic/asdf' target='_blank') Windows
                        .topic-desc Microsoft Windows，中文有译作微软视窗或微软窗口，或不译，是微软公司推出的一系列操作系统。
                        .topic-lists
                            .topic-lists-count.count 999
                            .text 轻单
                        .topic-followers
                            .topic-followers-count.count 999
                            .text 关注者
                        .topic-actions
                            button.topic-action.topic-follow.skin-cl.skin-bd 关注
                            button.topic-action.topic-unfollow.skin-bg.skin-bd(title='取消关注') 已关注
                .topic.topic-first-mobile.topic-following
                    a.topic-title-small.skin-cl(href='/topic/asdf' target='_blank') Windows
                    .topic-actions
                        button.topic-action.topic-follow.skin-cl.skin-bd 关注
                        button.topic-action.topic-unfollow.skin-bg.skin-bd(title='取消关注') 已关注
                    .topic-meta
                        .topic-desc-small Microsoft Windows，中文有译作微软视窗或微软窗口，或不译，是微软公司推出的一系列操作系统。
                        .topic-lists-small 999 个轻单
            else
                .topic
                    a.topic-title-small.skin-cl(href='/topic/asdf' target='_blank') Windows NaN
                    .topic-actions
                        button.topic-action.topic-follow.skin-cl.skin-bd 关注
                        button.topic-action.topic-unfollow.skin-bg.skin-bd(title='取消关注') 已关注
                    .topic-meta
                        .topic-desc-small Microsoft Windows，中文有译作微软视窗或微软窗口，或不译，是微软公司推出的一系列操作系统。
                        .topic-lists-small 999 个轻单

        a.more-topics.more-results(href='/aaa') 更多
hr.separate-line
.section.section-users
    .title 相关用户
    .section-content
        each topic, index in [1, 2, 3]
            .user(class={'following' : index === 0})
                a.user-avatar(href='/user/aaa' target='_blank')
                    img.user-avatar-img(src='https://dn-qlist.qbox.me/avatar/default.png?imageView2/1/w/144/interlace/1' width=32 height=32)
                .user-username
                    a.user-link(href='/user/aaa' target='_blank') 啊啊啊
                .user-bio 知名歌手
                .user-actions
                    button.user-action.user-follow.skin-cl.skin-bd 关注
                    button.user-action.user-unfollow.skin-bg.skin-bd(title='取消关注') 已关注
        a.more-users.more-results(href='/aaa') 更多--><div class="section section-lists"><%
if (error) {
  print('<div class="no-results">抱歉，Google 暂时不可用</div>');
} else if (!lists.length) {
  print('<div class="no-results">暂无相关结果</div>');
} else {
%><div class="title">相关轻单</div><div class="section-content"><div class="lists"><% _.each(lists, function(list) { %><div class="list"><div class="left"><a href="<%= list.link ? list.link : "/list/" + list.sid %>" target="_blank" class="list-title"><%= list.title %></a><div class="list-desc"><%= list.text %></div><% if (list.createBy) { %><div class="list-author"><a href="/user/<%= list.createBy.username %>" target="_blank" class="list-author-avatar-container"><img src="<%= list.createBy.avatar_large %>" width="34" height="34" class="list-author-avatar"></a><div class="list-author-link-container"><a href="/user/<%= list.createBy.username %>" target="_blank" class="list-author-link skin-cl"><%= list.createBy.nickname %></a></div><div class="list-meta"><a href="<%= list.link ? list.link : "/list/" + list.sid %>" target="_blank" class="list-date"><%= moment(list.modified).format('ll') %></a><span class="separate-dot">•</span><a href="<%= list.link ? list.link : "/list/" + list.sid %>" target="_blank" class="list-count"><%= list.itemNums %> 项</a></div></div><% } %></div><% if (list.cover_thumb2x) { %><a href="<%= list.link ? list.link : "/list/" + list.sid %>" target="_blank" style="background-image: url('<%= list.cover_thumb2x %>');" class="list-cover-container"><img src="<%= list.cover_thumb2x %>" class="list-cover"></a><% } %><hr class="separate-line"></div><% }); %></div><% if(lists.length === 10) { %><a href="javascript:;" class="more-lists">更多</a><% } %></div><% } %></div></script><div class="search-results"></div></div></div></div></div></div><div class="content"><div id="svgMask"><svg><defs><mask id="svg_draft"><rect width="100%" height="100%" fill="white"></rect><text x="9%" y="12%" font-size="12">草　稿</text></mask></defs></svg></div><div class="modal modal-share"><div class="share-container-cover"></div><div class="share-container"><div class="weixin"><h3>通过微信分享这个轻单</h3><p>你可以通过微信“扫一扫”，扫描下方的二维码</p><p>点击右上角的菜单键后选择“发送给朋友”或“分享到朋友圈”。</p><p class="img"><img></p><em>完成</em></div></div></div><div class="wrap"><div class="topic-info-container"><a id="topic-VN1uJ1tyxSml4bEa" href="../topic/VN1uJ1tyxSml4bEa.html" target="_blank" class="topic-item skin-bg-hover">读书笔记</a><a id="topic-VNcpCHjLccD68hNS" href="../topic/VNcpCHjLccD68hNS.html" target="_blank" class="topic-item skin-bg-hover">Python</a><a id="topic-VNcL4o353aX6lRpm" href="../topic/VNcL4o353aX6lRpm.html" target="_blank" class="topic-item skin-bg-hover">一分钟了解</a><a id="topic-VQkEnCERPShZYzTM" href="../topic/VQkEnCERPShZYzTM.html" target="_blank" class="topic-item skin-bg-hover">轻单精选</a></div><article id="list-VVlWZS7M6iHwrUrv" class="container"><header><div class="cover"><div class="embed-container ratio-640-300"><img src="https://qdan-res.kenengba.com/cover/2015/5/18/fce7d8ea1218d70ec0cf508872505940?imageView2/1/w/640/h/300/interlace/1" srcset="https://qdan-res.kenengba.com/cover/2015/5/18/fce7d8ea1218d70ec0cf508872505940?imageView2/1/w/1280/h/600/interlace/1 1.001x" data-large="https://qdan-res.kenengba.com/cover/2015/5/18/fce7d8ea1218d70ec0cf508872505940" class="cover-img"></div></div><div class="detail"><h1>Python技术十一问</h1><div class="note not-expanded"><p>听 Doug Hellmann谈Python。当你从头开发一个Python应用时，如何迈出第一步呢？它和开发一个已有的应用程序有什么不同？对于计划开始构建自己的Python库的人们有什么样的建议呢？将一个模块加入Python标准库的流程是什么？</p></div></div></header><section><ol class="items type-num"><li class="parent"><div class="title"><span></span><h2>当你从头开发一个Python应用时，如何迈出第一步呢？它和开发一个已有的应用程序有什么不同？</h2></div><div class="note"><p>从抽象角度看步骤都差不多，但是细节上有所不同。相对于对比开发新项目和已有项目，我个人在对应用程序和库开发的处理方式上有更多的不同。</p><p>&nbsp;</p><p>当我要修改已有代码时，特别是这些代码是其他人创建的时，起初我需要研究代码是如何工作的，我需要改进哪些代码。我可能会添加日志或是输出语句，或是用pdb，利用测试数据运行应用程序，以便我理解它是如何工作的。我经常会做一些修改并测试它们，并在每次提交代码前添加可能的自动化测试。</p><p>&nbsp;</p><p>创建一个新应用时，我会采取相同的逐步探索方法。我先创建一些代码，然后手动运行它们，在这个功能可以基本调通后，再编写测试用例确保我已经覆盖了所有的边界情况。创建测试用例也可以让代码重构更容易。</p><p>&nbsp;</p><p>这正是smiley（https://pypi.python.org/pypi/smiley）的情况。在开发正式应用程序前，我先尝试用Python的trace API写一些临时脚本。对于smiley我最初的设想包括一个仪表盘并从另一个运行的应用程序收集数据，另一部分用来接收通过网络发送过来的数据并将其保存。在添加几个不同的报告功能的过程中，我意识到重放已收集的数据的过程和在一开始收集数据的过程基本是一样的。于是我重构了一些类，并针对数据收集，数据库访问和报告生成器创建了基类。通过让这些类遵循同样的API使我可以很容易地创建数据收集应用的一个版本，它可以直接将数据写入数据库而无需通过网络发送数据。</p><p>&nbsp;</p><p>当设计一个应用程序时，我会考虑用户界面是如何工作的，但对于库，我会专注于开发人员如何使用其API。通过先写测试代码而不是库代码，可以让思考如何通过这个新库开发应用程序变得更容易一点儿。我通常会以测试的方式创建一系列示例程序，然后依照其工作方式去构建这个库。</p><p>&nbsp;</p><p>我还发现，在写任何库的代码之前先写文档让我可以全面考虑功能和流程的使用，而不需要提交任何实现的细节。它还让我可以记录对于设计我所做出的选择，以便读者不仅可以理解如何使用这个库，还可以了解在创建它时我的期望是什么。这就是我用在stevedore上的方法。</p><p>&nbsp;</p><p>我知道我想让stevedore能够提供一组类用来管理应用程序的插件。在设计阶段，我花了些时间思考我见过的使用插件的通用模式，并且写了几页粗略的文档描述这些类应该如何使用。我意识到，如果我在类的构造函数中放最复杂的参数，方法map()几乎是可互换的。这些设计笔记直接写进了stevedore官方文档的简介里，用来解释在应用程序</p></div></li><li class="parent"><div class="title"><span></span><h2>将一个模块加入Python标准库的流程是什么？</h2></div><div class="note"><p>完整的流程和规范可以在Python Developer's Guide（http://docs.python.org/devguide/stdlibchanges.html）中找到。</p><p>&nbsp;</p><p>一个模块在被加入Python标准库之前，需要被证明是稳定且广泛使用的。模块需要提供的功能要么是很难正确实现的，要么是非常有用以至于许多开发人员已经创建了他们自己不同的变种。API应该非常清晰并且它的实现不能依赖任何标准库之外的库。</p><p>&nbsp;</p><p>提议一个新模块的第一步是在社区通过python-ideas邮件列表非正式地了解一下大家对此的感兴趣程度。如果回应很积极，下一步就是创建一个Python增强提案（PythonEnhancement Proposal，PEP），它包括添加这个模块的动因，以及如何过渡的一些实现细节。</p><p>&nbsp;</p><p>因为包的管理和发现工作已经非常稳定了，尤其是pip和Python Package Index（PyPI），因此在标准库之外维护一个新的库可能更实用。单独的发布使得对于新功能和bug修复（bugfix）的更新可以更频繁，对于处理新技术或API的库来说这尤其重要。</p></div></li><li class="parent"><div class="title"><span></span><h2>标准库中的哪三个模块是你最想人们深入了解并开始使用的？</h2></div><div class="note"><p>最近我做了许多关于应用程序中动态加载扩展方面的工作。我使用abc模块为那些作为抽象基类进行的扩展定义API，以帮助扩展的作者们了解API的哪些方法是必需的，哪些是可选的。抽象基类已经在其他一些语言中内置了，但我发现很多Python程序员并不知道Python也有。</p><p>&nbsp;</p><p>bisect模块中的二分查找算法是个很好的例子，一个广泛使用但不容易正确实现的功能，因此它非常适合放到标准库中。我特别喜欢它可以搜索稀疏列表，且搜索的值可能并不在其中。</p><p>&nbsp;</p><p>collections模块中有许多有用的数据结构并没有得到广泛使用。我喜欢用namedtuple来创建一些小的像类一样的数据结构来保存数据但并不需要任何关联逻辑。如果之后需要添加逻辑的话，可以很容易将namedtuple转换成一个普通的类，因为namedtuple支持通过名字访问属性。另一个有意思的数据结构是ChainMap，它可以生成良好的层级命名空间。ChainMap能够用来为模板解析创建上下文或者通过清晰的流程定义来管理不同来源的配置。</p></div></li><li class="parent"><div class="title"><span></span><h2>许多项目（包括OpenStack）或者外部库，会在标准库之上封装一层自己的抽象。例如，我特别想了解对于日期/时间的处理。对此你有什么建议吗？程序员应该坚持使用标准库，还是应该写他们自己的函数，切换到其他外部库或是开始给Python提交补丁？</h2></div><div class="note"><p>所有这些都可以。我倾向于避免重复造轮子，所以我强烈主张贡献补丁和改进那些能够用来作为依赖的项目。但是，有时创建另外的抽象并单独维护代码也是合理的，不管在应用程序内还是作为一个新的库。</p><p>&nbsp;</p><p>你提到的例子中，OpenStack里的timeutils模块就是对Python的datetime模块的一层很薄的封装。大部分功能都简短且简单，但通过将这些最常见的操作封装为一个模块，我们可以保证它们在OpenStack项目中以一致的方式进行处理。因为许多函数都是应用相关的，某种意义上它们强化了一些问题决策，例如，字符串时间戳格式或者“现在”意味着什么，它们不太适合作为Python标准库的补丁或者作为一个通用库发布以及被其他项目采用。</p><p>&nbsp;</p><p>与之相反，我目前正致力于将OpenStack的API服务项目从早期创建时使用的WSGI框架转成采用一个第三方Web开发框架。在Python中开发WSGI应用有很多选择，并且当我们可能需要增强其中一个以便其可以完全适应OpenStack API服务器的需要时，将这些可重用的修改贡献对于维护一个“私有的”框架似乎更可取。</p></div></li><li class="parent"><div class="title"><span></span><h2>当从标准库或其他地方导入并使用大量模块时，关于该做什么你有什么特别的建议吗？</h2></div><div class="note"><p>我没有什么硬性限制，但是如果我有过多的导入时，我会重新考虑这个模块的设计并考虑将其拆到一个包中。与上层模块或者应用程序模块相比，对底层模块的这种拆分可能会发生得更快，因为对于上层模块我期望将更多片段组织在一起。</p></div></li><li class="parent"><div class="title"><span></span><h2>关于Python 3，有什么模块是值得一提而且能令开发人员有兴趣深入了解的？</h2></div><div class="note"><p>支持Python 3的第三方库的数量已经到了决定性的时刻。针对Python 3开发新库或应用程序从未如此简单过，而且幸亏有3.3中加入的兼容性功能使同时维护对Python 2.7的支持也很容易。主要的Linux发行版正在致力于将Python 3默认安装。任何人要用Python创建新项目都应该认真考虑对Python 3的支持，除非有尚未移植的依赖。目前来说，不能运行在Python 3上的库基本会被视为“不再维护”。</p></div></li><li class="parent"><div class="title"><span></span><h2>许多开发人员将所有的代码都写入到应用程序中，但有些情况下可能有必要将代码封装成一个库。关于设计、规划、迁移等，做这些最好的方式是什么？</h2></div><div class="note"><p>应用程序就是“胶水代码”的集合用来将库组织在一起完成特定目的。起初设计时可以将这些功能实现为一个库，然后在构建应用程序时确保库的代码能够很好地组织到逻辑单元中，这会让测试变得更简单。这还意味着应用程序的功能可以通过库进行访问，并且能够被重新组合以构建其他应用程序。未能采用这种方法的话意味着应用程序的功能和用户界面的绑定过于紧密，导致很难修改和重用。</p></div></li><li class="parent"><div class="title"><span></span><h2>对于计划开始构建自己的Python库的人们有什么样的建议呢？</h2></div><div class="note"><p>我通常建议自顶向下设计库和API，对每一层应用单一职责原则（Single Responsibility Principle，SRP）（http://en.wikipedia.org/wiki/Single_responsibility_principle）这样的设计准则。考虑调用者如何使用这个库，并创建一个API去支持这些功能。考虑什么值可以存在一个实例中被方法使用，以及每个方法每次都要传入哪些值。最后，考虑实现以及是否底层的代码的组织应该不同于公共API。</p><p>&nbsp;</p><p>SQLAlchemy是应用这些原则的绝好例子。声明式ORM、数据映射和表达式生成层都是单独的。开发人员可以自行决定对于API访问的正确的抽象程度，并基于他们的需求而不是被库的设计强加的约束去使用这个库。</p></div></li><li class="parent"><div class="title"><span></span><h2>当你随机看Python程序员的代码时遇到的最常见的编程错误是什么？</h2></div><div class="note"><p>Python的习惯用法和其他语言的一个较大的不同在于循环和迭代。例如，我见过的最常见的反模式是使用for循环过滤一个列表并将元素加入到一个新的列表中，然后再在第二个循环中处理这个结果（可能将列表作为参数传给一个函数）。我通常建议将过滤循环改成生成器表达式，因为生成器表达式，更有效也更容易理解。列表的组合也很常见，以便它们的内容可以以某种方式一起被处理，但却没有使用itertools.chain()。</p><p>&nbsp;</p><p>还有一些我在代码评审时给出的更细小的建议，例如，使用dict()而不是长的if:then:else块作为查找表，确保函数总是返回相同的类型（如一个空列表而不是None），通过使用元组和新类将相关的值合并到一个对象中从而减少函数的参数，以及在公共API中定义要使用的类而不是依赖于字典。</p></div></li><li class="parent"><div class="title"><span></span><h2>有没有关于选择了一个“错误”的依赖的具体的例子是你亲身经历或目睹过的？</h2></div><div class="note"><p>最近，我有个例子，pyparsing（https://pypi.python.org/pypi/pyparsing）的一个新发布取消了对Python 2的支持，这给我正在维护的一个库带来了一点儿小麻烦。对pyparsing的更新是个重大的修改，而且是明确标识成这样的，但是因为我没有在对cliff（https://pypi.python.org/pypi/cliff）的设置中限制依赖版本号，所以pyparsing的新发布给cliff的用户造成了问题。解决方案就是在cliff的依赖列表中对Python 2和Python 3提供不同的版本边界。这种情况突显了理解依赖管理和确保持续集成测试中适当的测试配置的重要性。</p></div></li><li class="parent"><div class="title"><span></span><h2>你怎么看待框架？</h2></div><div class="note"><p>框架像任何工具类型一样。它们确实有帮助，但在选择框架时要特别谨慎，应确保它能够很好地完成当前的工作。</p><p>&nbsp;</p><p>通过抽取公共部分到一个框架中，你可以将你的开发精力专注于应用中独特的方面。通过提供许多类似运行在开发模式或者写一个测试套件这样的引导代码，它们还可以帮你让一个应用程序迅速达到一个可用的状态而不是从头开发。它们还可以激励你在应用程序开发过程中保持一致，这意味着最终你的代码将更易于理解且更可重用。</p><p>&nbsp;</p><p>虽然使用框架时还有其他一些潜在的缺点需要注意。决定使用某个特定框架通常能够反映应用程序本身的设计。如果设计的限制不能从根本上符合应用程序的需求，那么选择错误的框架会令应用的实现变得更难。如果你试着使用与框架建议不同的模式或惯用方式，你最终将不得不同框架做斗争。</p></div></li><li class="parent"><div class="title"><span></span><h2>本文出自《Python高手之路》中的Doug Hellmann访谈。</h2></div><div class="note"><p>这不是一本常规意义上Python的入门书。这本书中没有Python关键字和for循环的使用，也没有细致入微的标准库介绍，而是完全从实战的角度出发，对构建一个完整的Python应用所需掌握的知识进行了系统而完整的介绍。更为难得的是，本书的作者是开源项目OpenStack的PTL（项目技术负责人）之一，因此本书结合了Python在OpenStack中的应用进行讲解，非常具有实战指导意义。</p><p>　　《Python高手之路》从如何开始一个新的项目讲起，首先是整个项目的结构设计，对模块和库的管理，如何编写文档，进而讲到如何分发，以及如何通过虚拟环境对项目进行测试。此外，《Python高手之路》还涉及了很多高级主题，如性能优化、插件化结构的设计与架构、Python 3的支持策略等。</p><div class="link-info"> <div class="_smartlink-base slt-page-normal"><div style="background-image:url('https://qdan-res.kenengba.com/link/aHR0cDovL2ltZzExLjM2MGJ1eWltZy5jb20vbjEvamZzL3Q5NDMvMzMwLzgwNDA0NzQ1MS80MjQwNDcvNDY4Yjk3MjYvNTU0YWRhOWFOMDAyMWRkNWUuanBn?imageView2/2/w/300/h/300')" data-big="//dn-qdan.qbox.me/link/aHR0cDovL2ltZzExLjM2MGJ1eWltZy5jb20vbjEvamZzL3Q5NDMvMzMwLzgwNDA0NzQ1MS80MjQwNDcvNDY4Yjk3MjYvNTU0YWRhOWFOMDAyMWRkNWUuanBn" class="sl-cover-wrapper"></div><div class="sl-title-wrapper"><a href="http://item.jd.com/11685556.html" target="_blank" class="sl-title">《Python高手之路》([法]朱利安·丹乔（Julien Danjou）)【摘要 书评 试读】- 京东图书</a></div><div class="sl-desc">京东JD.COM图书频道为您提供《Python高手之路》在线选购，本书作者：，出版社：人民邮电出版社。买图书，到京东。网购图书，享受最低优惠折扣!</div><div class="sl-info"><ul></ul></div><div class="sl-footer"><span class="qlisticon icon-publ"></span><span title="http://item.jd.com/11685556.html" class="footer-text">item.jd.com</span></div></div></div></div></li></ol><footer class="action-bar"><div class="col"><button title="共浏览了2032次" class="button btn-view"><i class="qlisticon icon-remove-red-eye skin-cl"></i><span class="count">2032</span></button><button data-id="VVlWZS7M6iHwrUrv" title="赞" class="btn-ui-like require-login"><i class="qlisticon icon-favorite-outline skin-cl"></i><span class="count">31</span></button><div data-id="VVlWZS7M6iHwrUrv" class="ui-likes"><a href="../user/binyuan.html" title="Levin" class="like-user"><img src="https://qdan-res.kenengba.com/avatar/default.png?imageView2/1/w/48/interlace/1" width="24" height="24"></a><a href="../user/u4002639.html" title="聪明的一休哥" class="like-user"><img src="https://qdan-res.kenengba.com/avatar/default.png?imageView2/1/w/48/interlace/1" width="24" height="24"></a><a href="../user/u2120256.html" title="Super flying pig" class="like-user"><img src="https://qdan-res.kenengba.com/avatar/default.png?imageView2/1/w/48/interlace/1" width="24" height="24"></a><span class="txt"><a href="javascript:;" class="btn-like-all">等人赞了此轻单</a></span></div></div><div class="col col-right"><a data-note="听 Doug Hellmann谈Python。当你从头开发一个Python应用时，如何迈出第一步呢？它和开发一个已有的应用程序有什么不同？对于计划开始构建自己的Python库的人们有什么样的建议呢？将一个模块加入Python标准库的流程是什么？" title="分享到微博" class="share-bt share-weibo-bt"><i class="qlisticon icon-weibo"></i></a><a title="分享到微信" class="share-bt share-weixin-bt"><i class="qlisticon icon-wechat"></i></a><a title="分享到Twitter" class="share-bt share-twitter-bt"><i class="qlisticon icon-twitter"></i></a></div></footer><div data-id="VVlWZS7M6iHwrUrv" class="ui-likes ui-likes-all"></div></section></article><div id="comment-container" class="comment-container"><h3 class="title skin-bg">评论（<span class='count'>0</span>）</h3><div class="comments"><script id="commentTemplate" type="text/html"><div data-id="<%= comment._id %>" class="comment"><div class="comment-body"><div class="avatar"><a href="/user/undefined" class="user-profile-link"><img src="<%= qlist.userInfo.avatar_huge %>" width="32" height="32" class="avatar-img"></a></div><div class="comment-meta"><a href="/user/<%= qlist.userInfo.username %>" class="nickname skin-cl"><%= qlist.userInfo.nickname %></a><span class="interpunct">·</span><span data-date="<% comment.added %>" title="<% moment(comment.added).format("lll") %>" class="date"><%= moment(comment.added).fromNow() %></span><a href="javascript:;" class="del-comment skin-cl">移除此评论</a></div><div class="comment-content"><%= _.escape(comment.note).replace(/\n/g, '<br>') %></div><div class="comment-actions"><a href="javascript:;" class="add-reply-link skin-cl"><div class="qlisticon icon-reply"></div>回复</a><a href="javascript:;" class="like-comment skin-cl qlisticon icon-favorite-outline"></a><span class="likes"><%= comment.likes %></span></div></div><div data-id="<%= comment._id %>" class="replies skin-bg-gray"><div class="border skin-bd-gray"></div><div class="border border-outer"></div><form data-id="VVlWZS7M6iHwrUrv" autocomplete="off" class="add-reply-comment"><div class="avatar"><a href="/user/undefined" class="user-profile-link"><img width="32" height="32" class="avatar-img"></a></div><textarea name="note" placeholder="回复 <%= qlist.userInfo.nickname %>" class="note comment-textarea"></textarea><input name="replyid" type="hidden" value="<%= comment._id %>" class="replyid"><input type="submit" value="回复" class="submit skin-bg"><a href="javascript:;" class="cancel-reply skin-cl">取消</a></form></div></div></script><script id="replyTemplate" type="text/html"><div id="comment-<%= comment._id %>" data-id="<%= comment._id %>" class="reply comment"><div class="comment-body"><div class="avatar"><a href="/user/undefined" class="user-profile-link"><img src="<%= qlist.userInfo.avatar_huge %>" width="32" height="32" class="avatar-img"></a></div><div class="comment-meta"><a href="/user/<%= qlist.userInfo.username %>" class="nickname skin-cl"><%= qlist.userInfo.nickname %></a><span class="interpunct">·</span><a href="#comment-<%= comment._id %>" data-date="<% comment.added %>" title="<% moment(comment.added).format("lll") %>" class="date"><%= moment(comment.added).fromNow() %></a><a href="javascript:;" class="del-comment skin-cl">移除此评论</a></div><div class="comment-content"><%= _.escape(comment.note).replace(/\n/g, '<br>') %></div><div class="comment-actions"><a href="javascript:;" class="like-comment skin-cl qlisticon icon-favorite-outline"></a><span class="likes"><%= comment.likes %></span></div></div></div></script><script id="commentRelpyFormTemplate" type="text/html"><form data-id="VVlWZS7M6iHwrUrv" autocomplete="off" class="add-reply-comment"><div class="avatar"><a href="/user/undefined" class="user-profile-link"><img src="<%= qlist.userInfo.avatar_huge %>" width="32" height="32" class="avatar-img"></a></div><textarea name="note" placeholder="" class="note comment-textarea"></textarea><input name="replyid" type="hidden" value="<%= replyid %>" class="replyid"><input type="submit" value="回复" class="submit skin-bg"><a href="javascript:;" class="cancel-reply skin-cl">取消</a></form></script></div><form data-id="VVlWZS7M6iHwrUrv" autocomplete="off" class="add-comment"><div class="avatar"><span class="user-profile-link require-login"><img src="https://qdan-res.kenengba.com/avatar/default.png?imageView2/1/w/144/interlace/1" width="32" height="32"></span></div><textarea name="note" placeholder="这个轻单怎么样？说说你的看法" class="note comment-textarea"></textarea><input type="submit" value="评论" class="submit skin-bg"></form></div></div><aside class="side"><div class="block"></div>
<div class="side-mod action"><a data-id="VVlWZS7M6iHwrUrv" title="收藏" class="button star skin-bg require-login"><i class="qlisticon icon-bookmark-outline"></i>收藏此轻单</a><a data-id="VVlWZS7M6iHwrUrv" title="取消收藏" class="button unstar skin-bg require-login"><i class="qlisticon icon-bookmark-checked"></i>已收藏轻单</a><p><span class="stars skin-cl">37</span>人收藏了此「轻单」</p></div><div class="side-mod users"><h3 class="skin-bg">轻单作者</h3><div class="user-info"><div class="user-avatar"><a href="../user/guozhimin-from=list-sidebar-image.html"><img src="https://qdan-res.kenengba.com/avatar/default.png?imageView2/1/w/144/interlace/1" width="42" height="42" title="@出版圈郭志敏" alt="@出版圈郭志敏"></a></div><div class="user-profile"><a href="../user/guozhimin-from=list-sidebar.html" class="name skin-cl">@出版圈郭志敏</a><div class="dsc">发布于 2015年5月18日</div></div><div class="user-link">从简书、果壳、知乎的程序员书屋里，都可以找到我。微博@出版圈郭志敏</div></div></div><div class="side-mod"><h3 class="skin-bg">作者更多轻单</h3><ul><li class="skin-cl"><a href="V0elz0qgq599bZmC-from=list-sidebar.html" class="skin-bg-hover">Python电子书8本，推荐给你</a><span><i class="qlisticon icon-favorite"></i>32</span></li><li class="skin-cl"><a href="VW1qgn-sTWhyTMhW-from=list-sidebar.html" class="skin-bg-hover">JavaScript | 成为优秀前端工程师的靠谱书单</a><span><i class="qlisticon icon-favorite"></i>51</span></li><li class="skin-cl"><a href="VWfT7YjOZyNBi3Li-from=list-sidebar.html" class="skin-bg-hover">开启程序员智慧的几本书</a><span><i class="qlisticon icon-favorite"></i>35</span></li></ul></div></aside></div><div class="footer"><div class="about">© 2015 <a href='../index.html' title='轻单'>轻单</a> | <a href='../donate.html'>捐助</a> | <a href='../feedback.html'>反馈</a> | <a href='../about.html'>关于</a> |<a href="https://appsto.re/us/yBHR5.i" target="_blank" onClick="javascript:pageTracker._trackPageview('/outgoing/footer_ad');"><i class="qlisticon icon-phone-iphone"></i>移动应用</a></div><div class="side-navs desktop-1200 hidden"><div class="nav-group social-network-links"><a href="http://weibo.com/qdanme" target="_blank" class="nav"><i class="qlisticon icon-weibo"></i><div class="popout"><img src="../img/branding/weibo_qrcode.png" class="popout-img"><div class="popout-title">关注轻单微博</div></div></a><a class="nav"><i class="qlisticon icon-wechat"></i><div class="popout"><img src="../img/branding/wechat_qrcode.jpg" class="popout-img"><div class="popout-title">关注轻单微信</div></div></a></div><div class="nav-group site-nav"><a class="nav scroll-to-top"><i class="qlisticon icon-expand-less"></i></a></div></div><script id="toast-template" type="text/html"><div class="ui-toast"><table class="ui-toast-content"><tbody><tr><td><div class="toast-content"><%= content %></div></td><% if (action) { %><td><a href="javascript:;" class="toast-action"><%= action %></a></td><% } %><td><a href="javascript:;" class="toast-close desktop">×</a></td></tr></tbody></table></div></script><script id="user-info-data" type="text/html">{}</script><script id="config-data" type="text/html">{&quot;qiniuResUrl&quot;:&quot;https://qdan-res.kenengba.com&quot;}</script></div><script src="../build/js/common.min.js"></script><script src="../build/js/list-list.min.js"></script></body></html>